import{_ as se,f as re,z as ae,e as ie,p as a,g as B,h as ue,y as de,o as m,c as b,k as Q,a as o,q as L,B as ce,F as j,r as I,t as V,C as R,v as $,n as E,l as z,D as ve,i as D,E as pe,I as fe}from"./index-fb0b7d97.js";import{_ as me}from"./QuoteContent-d3ba4e08.js";var be="M12,1L8,5H11V14H13V5H16M18,23H6C4.89,23 4,22.1 4,21V9A2,2 0 0,1 6,7H9V9H6V21H18V9H15V7H18A2,2 0 0,1 20,9V21A2,2 0 0,1 18,23Z",M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we={exports:{}};(function(F,S){(function(k,d){d()})(M,function(){function k(n,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function d(n,s,i){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){y(r.response,s,i)},r.onerror=function(){console.error("could not download file")},r.send()}function v(n){var s=new XMLHttpRequest;s.open("HEAD",n,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function x(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(s)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof M=="object"&&M.global===M?M:void 0,w=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(n,s,i){var r=c.URL||c.webkitURL,u=document.createElement("a");s=s||n.name||"download",u.download=s,u.rel="noopener",typeof n=="string"?(u.href=n,u.origin===location.origin?x(u):v(u.href)?d(n,s,i):x(u,u.target="_blank")):(u.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(u.href)},4e4),setTimeout(function(){x(u)},0))}:"msSaveOrOpenBlob"in navigator?function(n,s,i){if(s=s||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(k(n,i),s);else if(v(n))d(n,s,i);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){x(r)})}}:function(n,s,i,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return d(n,s,i);var u=n.type==="application/octet-stream",h=/constructor/i.test(c.HTMLElement)||c.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||u&&h||w)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var g=C.result;g=f?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},C.readAsDataURL(n)}else{var _=c.URL||c.webkitURL,A=_.createObjectURL(n);r?r.location=A:location.href=A,r=null,setTimeout(function(){_.revokeObjectURL(A)},4e4)}});c.saveAs=y.saveAs=y,F.exports=y})})(we);const ye={class:"flex"},xe={class:"p-4 border-b"},ge={class:"flex items-center mb-2"},ke={class:"flex items-center gap-2 mb-2"},he=["title","onClick"],Ce={class:"px-4 py-2 border-b"},Be={class:"h-40 overflow-y-auto"},Se=["onClick"],_e={class:"px-4 py-2"},Ae={class:"h-40 overflow-y-auto"},Le=["onClick"],Ee={class:""},Me={class:"flex justify-between items-center mb-4"},je={class:"flex items-center space-x-4"},Ie={class:"space-y-6"},Ve={class:"mt-6 flex justify-center"},He={__name:"quotes",setup(F){const S=re();ae();const k=ie();a(null),a(null);const d=a(null),v=a(null),x=a("desc"),c=a(20),w=a(1);a(null);const y=a(!1),n=a(!1),s=a(""),i=a(""),r=a(!1),u=["yellow","red","pink","blue","green","orange","gray","purple"],h=a(null),f=a(!1),C=a(!1),_=a(!1),A=B(()=>{const e=[...new Set(S.quotes.map(t=>t.bookId))].map(t=>{const p=k.getBookById(t);return p?p.title:null}).filter(t=>t!==null);return[...new Set(e)]}),g=B(()=>{const e=[...new Set(S.quotes.map(t=>t.bookId))].map(t=>{const p=k.getBookById(t);return p?p.author:null}).filter(t=>t!==null);return[...new Set(e)]}),N=B(()=>s.value?A.value.filter(l=>l.toLowerCase().includes(s.value.toLowerCase())):A.value),P=B(()=>i.value?g.value.filter(l=>l.toLowerCase().includes(i.value.toLowerCase())):g.value),T=B(()=>{let l=S.quotes;return d.value&&(l=l.filter(e=>{const t=k.getBookById(e.bookId);return t&&t.title===d.value})),v.value&&(l=l.filter(e=>{const t=k.getBookById(e.bookId);return t&&t.author===v.value})),r.value&&(l=l.filter(e=>e.favourite)),h.value&&(l=l.filter(e=>e.color===h.value)),l.sort((e,t)=>{const p=new Date(e.dateHighlighted),O=new Date(t.dateHighlighted);return x.value==="asc"?p-O:O-p})}),W=l=>{h.value=h.value===l?null:l},q=B(()=>T.value.slice(0,w.value*c.value)),G=B(()=>q.value.length<T.value.length);a(be);const K=async l=>{confirm("Do you want to delete this quote?")&&(S.deleteQuote(l.id),alert("The quote record has been deleted."))},X=async l=>{S.updateQuote(l.id,{text:l.text.trim()})},Z=l=>{console.log("New quote added:",l)},J=l=>{console.log("Import completed successfully:",l)},Y=l=>{d.value===l?d.value=null:(d.value=l,v.value=null),w.value=1},ee=l=>{v.value===l?v.value=null:(v.value=l,d.value=null),w.value=1},te=()=>{d.value=null,v.value=null,w.value=1},oe=()=>{w.value=1},ne=()=>{w.value++},le=()=>{f.value=!f.value,window.innerWidth<768&&(document.body.style.overflow=f.value?"hidden":"")},H=()=>{f.value=!1,document.body.style.overflow=""},U=()=>{window.innerWidth>=768&&f.value&&H()};return ue(()=>{window.addEventListener("resize",U)}),de(()=>{window.removeEventListener("resize",U),document.body.style.overflow=""}),(l,e)=>(m(),b("div",ye,[f.value?(m(),b("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:H})):Q("",!0),o("div",{class:E(["sidebar-container w-[300px] bg-white shadow-md flex flex-col h-screen fixed left-[250px] top-0 z-40 md:left-[250px] transform transition-transform duration-300 ease-in-out",f.value?"translate-x-0":"-translate-x-full md:translate-x-0"])},[o("div",xe,[o("div",{class:"flex justify-between items-center mb-2 md:block"},[e[11]||(e[11]=o("h2",{class:"text-xl font-semibold"},"Filters",-1)),o("button",{class:"md:hidden p-1 rounded hover:bg-gray-100",onClick:H,"aria-label":"Close filters menu"},e[10]||(e[10]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("div",ge,[L(o("input",{id:"fav-filter",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"mr-2"},null,512),[[ce,r.value]]),e[12]||(e[12]=o("label",{for:"fav-filter",class:"text-sm cursor-pointer"},"Favourite",-1))]),o("div",ke,[(m(),b(j,null,I(u,t=>o("span",{key:t,title:t,class:E(["rounded-full h-5 w-5 cursor-pointer border-2",h.value===t?"border-black":"border-transparent",`bg-${t}-300`]),onClick:p=>W(t)},null,10,he)),64)),e[13]||(e[13]=o("span",{class:"ml-2 text-xs text-gray-500"},"Color",-1))])]),o("div",null,[o("div",{class:"flex items-center justify-between px-4 py-2 cursor-pointer select-none border-b",onClick:e[1]||(e[1]=t=>y.value=!y.value)},[e[14]||(e[14]=o("span",{class:"font-bold"},"Books",-1)),o("span",null,V(y.value?"+":"-"),1)]),L(o("div",Ce,[L(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),placeholder:"Search Books",class:"mb-2 w-full px-2 py-1 border rounded text-sm"},null,512),[[$,s.value]]),o("div",Be,[o("ul",null,[(m(!0),b(j,null,I(N.value,t=>(m(),b("li",{key:t,onClick:p=>Y(t),class:E(["cursor-pointer hover:bg-gray-200 p-2 rounded text-sm",{"bg-blue-200":d.value===t}])},V(t),11,Se))),128))])])],512),[[R,!y.value]])]),o("div",null,[o("div",{class:"flex items-center justify-between px-4 py-2 cursor-pointer select-none border-b",onClick:e[3]||(e[3]=t=>n.value=!n.value)},[e[15]||(e[15]=o("span",{class:"font-bold"},"Authors",-1)),o("span",null,V(n.value?"+":"-"),1)]),L(o("div",_e,[L(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t),placeholder:"Search Authors",class:"mb-2 w-full px-2 py-1 border rounded text-sm"},null,512),[[$,i.value]]),o("div",Ae,[o("ul",null,[(m(!0),b(j,null,I(P.value,t=>(m(),b("li",{key:t,onClick:p=>ee(t),class:E(["cursor-pointer hover:bg-gray-200 p-2 rounded text-sm",{"bg-blue-200":v.value===t}])},V(t),11,Le))),128))])])],512),[[R,!n.value]])]),o("div",{class:"p-4 border-t mt-auto h-[70px]"},[o("button",{onClick:te,class:"w-full bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded"}," Clear Filters ")])],2),o("div",{class:E(["main-content w-full min-h-screen ml-[325px] mr-[25px] md:ml-[325px] transition-all duration-300",{"ml-0 mr-4":!0}])},[o("div",Ee,[o("div",{class:"flex justify-between items-center"},[e[16]||(e[16]=o("div",{class:"text-3xl font-bold my-6"},"Quotes",-1)),o("button",{class:"mobile-menu-btn md:hidden bg-white px-2 py-1 rounded border",onClick:le,"aria-label":"Toggle filters menu"}," Filters ")]),o("div",Me,[o("div",je,[o("button",{onClick:e[5]||(e[5]=t=>C.value=!0),class:"bg-violet-500 hover:bg-violet-600 text-white px-4 py-1 rounded flex items-center gap-2"},e[17]||(e[17]=[o("i",{class:"fas fa-plus"},null,-1),z(" Add ",-1)])),o("button",{onClick:e[6]||(e[6]=t=>_.value=!0),class:"bg-white border border-violet-200 hover:bg-violet-200 text-violet-700 stroke-violet-700 px-4 py-1 rounded flex items-center gap-2"},e[18]||(e[18]=[o("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),z(" Import ",-1)])),L(o("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),onChange:oe,class:"border border-customPurple-500 rounded px-2 py-1"},e[19]||(e[19]=[o("option",{value:"asc"},"Sort: Oldest First",-1),o("option",{value:"desc"},"Sort: Newest First",-1)]),544),[[ve,x.value]])])]),o("div",Ie,[(m(!0),b(j,null,I(q.value,t=>(m(),b("div",{key:t.id},[D(me,{quote:t,onDeleteQuote:K,onUpdateQuote:X},null,8,["quote"])]))),128))]),o("div",Ve,[G.value?(m(),b("button",{key:0,onClick:ne,class:"bg-white-500 text-customPurple-900 border hover:bg-customPurple-300 border-customPurple-500 px-4 py-2 rounded"}," Load More ")):Q("",!0)])])]),D(pe,{"is-open":C.value,onClose:e[8]||(e[8]=t=>C.value=!1),onQuoteAdded:Z},null,8,["is-open"]),D(fe,{"is-open":_.value,onClose:e[9]||(e[9]=t=>_.value=!1),onImportSuccess:J},null,8,["is-open"])]))}},Te=se(He,[["__scopeId","data-v-12a09693"]]);export{Te as default};
