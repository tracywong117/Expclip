import{_ as T,o as s,c as l,a as e,k as v,n as m,l as C,F as f,r as p,m as A,t as h,e as S,f as D,u as F,p as _,g as y,i as k,q as H,v as N,A as q}from"./index-2073e561.js";const E={props:{currentView:{type:String,required:!0,validator:u=>["list","grid"].includes(u)}},emits:["view-change"]},L={class:"inline-flex bg-gray-200 rounded-full w-30 shadow-sm"},G={key:0,class:"ml-1.5"},I={key:0,class:"ml-1.5"};function U(u,r,g,x,i,d){return s(),l("div",L,[e("button",{onClick:r[0]||(r[0]=n=>u.$emit("view-change","list")),class:m(["flex items-center justify-center px-3 py-1.5 rounded-full transition-all duration-200 ease-in-out text-sm",g.currentView==="list"?"bg-customPurple-600 text-white":"hover:bg-customPurple-100 text-customPurple-700"])},[r[2]||(r[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)),g.currentView==="list"?(s(),l("span",G,"List")):v("",!0)],2),e("button",{onClick:r[1]||(r[1]=n=>u.$emit("view-change","grid")),class:m(["flex items-center justify-center px-3 py-1.5 rounded-full transition-all duration-200 ease-in-out text-sm",g.currentView==="grid"?"bg-customPurple-600 text-white":"hover:bg-customPurple-100 text-customPurple-700"])},[r[3]||(r[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)),g.currentView==="grid"?(s(),l("span",I,"Grid")):v("",!0)],2)])}const Q=T(E,[["render",U]]),R={props:{tags:{type:Array,required:!0}},data(){return{search:"",selectedTags:[],dropdownVisible:!1}},computed:{filteredTags(){return this.tags}},methods:{toggleDropdown(){this.dropdownVisible=!this.dropdownVisible},toggleTag(u){this.selectedTags.includes(u)?this.removeTag(u):this.selectedTags.push(u)},removeTag(u){this.selectedTags=this.selectedTags.filter(r=>r!==u)},applyFilter(){this.$emit("update:selectedTags",this.selectedTags),this.dropdownVisible=!1}}},J={class:"w-44 relative"},K={key:0,class:"absolute bg-white border border-gray-300 rounded w-full mt-2 z-10"},O={class:"max-h-64 overflow-y-auto"},W=["onClick"],X=["checked"];function Y(u,r,g,x,i,d){return s(),l("div",J,[e("button",{onClick:r[0]||(r[0]=(...n)=>d.toggleDropdown&&d.toggleDropdown(...n)),class:"flex items-center justify-between w-full p-2 border border-purple-300 rounded bg-white hover:bg-customPurple-100"},r[3]||(r[3]=[e("span",{class:"flex items-center"},[e("i",{class:"fas fa-tags mr-2"}),C(" Tags ")],-1),e("i",{class:"fas fa-caret-down"},null,-1)])),i.dropdownVisible?(s(),l("div",K,[e("div",O,[(s(!0),l(f,null,p(d.filteredTags,n=>(s(),l("div",{key:n,onClick:w=>d.toggleTag(n),class:"flex items-center px-4 py-2 cursor-pointer hover:bg-gray-100"},[e("input",{type:"checkbox",checked:i.selectedTags.includes(n),class:"mr-2",onChange:r[1]||(r[1]=A(()=>{},["stop"]))},null,40,X),C(" "+h(n),1)],8,W))),128))]),e("button",{onClick:r[2]||(r[2]=(...n)=>d.applyFilter&&d.applyFilter(...n)),class:"w-full bg-violet-500 text-white py-2 rounded-b"}," Filter ")])):v("",!0)])}const Z=T(R,[["render",Y]]);const ee={class:"container mx-auto p-4"},te={class:"flex justify-between items-center mb-4"},se={class:"flex items-center space-x-4"},le={class:"flex mb-4 space-x-4"},re={class:"flex justify-center"},oe=["onClick"],ae={key:0,class:"w-48 flex justify-center"},ne=["src"],ie={key:1,class:"w-48 h-48 border cursor-pointer"},de={class:"text-lg font-semibold my-1 text-center"},ue={class:"text-sm text-gray-500 mb-4"},ce={class:"flex items-center"},ve={key:0,class:"fas fa-star mr-1"},ge={key:1,class:"far fa-star mr-1"},fe=["onClick"],pe={class:"flex"},he={key:0,class:"w-48 h-48"},me=["src"],xe={key:1,class:"w-48 h-48 border flex justify-center items-center cursor-pointer"},_e={class:"ml-4 flex"},we={class:"flex flex-col justify-between"},ye={class:"text-lg font-semibold mb-1"},be={class:"text-sm text-gray-500 mb-4"},ke={key:0,class:"flex flex-wrap gap-2"},Ce={class:"flex justify-center mt-6"},Te=["onClick"],$e=["disabled"],Ve={__name:"books",setup(u){const r=S();D();const g=F(),x=_([]),i=_(1),d=_(8),n=_("grid"),w=_(!1),$=y(()=>{let a=r.books;return x.value.length>0&&(a=a.filter(o=>o.tags&&o.tags.some(t=>x.value.includes(t)))),a}),P=y(()=>{const a=new Set;return r.books.forEach(o=>{o.tags&&o.tags.forEach(t=>a.add(t))}),Array.from(a).sort()}),V=y(()=>{const a=(i.value-1)*d.value,o=a+d.value;return $.value.slice(a,o)}),b=y(()=>Math.ceil($.value.length/d.value)),j=a=>{n.value=a},z=a=>{x.value=a,i.value=1},B=a=>{g.push(`/books/${a}`)},M=a=>{g.push(`/books/${a.id}`)};return(a,o)=>(s(),l("div",ee,[e("div",te,[o[4]||(o[4]=e("div",{class:"flex flex-row items-center gap-5"},[e("div",{class:"text-3xl font-bold"},"All Books")],-1)),e("div",se,[k(Q,{"current-view":n.value,onViewChange:j},null,8,["current-view"])])]),e("div",le,[e("button",{onClick:o[0]||(o[0]=t=>w.value=!0),class:"bg-violet-500 hover:bg-violet-600 text-white px-4 py-2 rounded flex items-center gap-2"},o[5]||(o[5]=[e("i",{class:"fas fa-plus"},null,-1),C(" Add ",-1)])),k(Z,{tags:P.value,"onUpdate:selectedTags":z},null,8,["tags"])]),e("div",re,[n.value==="grid"?(s(),l("div",{key:0,class:m([n.value,"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10 md:px-5"])},[(s(!0),l(f,null,p(V.value,t=>(s(),l("div",{key:t.id,class:"rounded-lg p-4 w-fit flex flex-col items-center justify-center cursor-pointer",onClick:c=>B(t.id)},[t.cover?(s(),l("div",ae,[t.cover?(s(),l("img",{key:0,src:t.cover,alt:"Book Cover",class:"h-48 rounded-lg"},null,8,ne)):v("",!0)])):v("",!0),t.cover?v("",!0):(s(),l("div",ie)),e("h3",de,h(t.title),1),e("p",ue,"by "+h(t.author),1),e("span",ce,[(s(),l(f,null,p(5,c=>e("span",{key:c,class:"text-amber-300"},[c<=t.stars?(s(),l("i",ve)):(s(),l("i",ge))])),64))])],8,oe))),128))],2)):v("",!0)]),n.value==="list"?(s(),l("div",{key:0,class:m([n.value,"grid gap-6"])},[(s(!0),l(f,null,p(V.value,t=>(s(),l("div",{key:t.id,class:"rounded-lg p-4 w-full cursor-pointer flex justify-between items-center",onClick:c=>B(t.id)},[e("div",pe,[t.cover||t.image?(s(),l("div",he,[e("img",{src:t.cover||t.image,alt:"Book Cover",class:"h-48 rounded-lg"},null,8,me)])):v("",!0),t.cover?v("",!0):(s(),l("div",xe)),e("div",_e,[e("div",we,[e("div",null,[e("h3",ye,h(t.title),1),e("p",be,"by "+h(t.author),1),(s(),l(f,null,p(5,c=>e("span",{key:c,class:"text-yellow-400"},[e("i",{class:m(["fas",c<=t.stars?"fa-star":"fa-star-o"])},null,2)])),64))]),t.tags&&t.tags.length>0?(s(),l("div",ke,[(s(!0),l(f,null,p(t.tags,c=>(s(),l("span",{key:c,class:"inline-block bg-violet-100 text-violet-800 text-xs px-2 py-1 rounded-full"},h(c),1))),128))])):v("",!0)])])]),o[6]||(o[6]=e("div",null,[e("i",{class:"fas fa-chevron-right text-gray-400"})],-1))],8,fe))),128))],2)):v("",!0),e("div",Ce,[(s(!0),l(f,null,p(b.value,t=>(s(),l("button",{key:t,onClick:c=>i.value=t,class:m(["px-3 py-1 mx-1 rounded",{"bg-customPurple-600 text-white":i.value===t,"bg-gray-200":i.value!==t}])},h(t),11,Te))),128)),e("div",null,[e("button",{onClick:o[1]||(o[1]=t=>i.value=i.value+1),disabled:i.value===b.value,class:m(["px-3 py-1 mx-1 rounded bg-customPurple-600 text-white",{"bg-gray-200":i.value===b.value}])}," Next ",10,$e),H(e("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=t=>d.value=t),min:"3",max:"99",class:"m-auto bg-white border border-gray-300 rounded px-2 py-1 w-20 outline-none"},null,512),[[N,d.value,void 0,{number:!0}]])])]),k(q,{"is-open":w.value,onClose:o[3]||(o[3]=t=>w.value=!1),onBookAdded:M},null,8,["is-open"])]))}},Pe=T(Ve,[["__scopeId","data-v-5230e5ce"]]);export{Pe as default};
